<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.springboot.project.movie.mapper.MovieLikeDAO">
  
	<insert id="insertListLike">
     	INSERT INTO 
      		movie_like (mov_idn, number)
       	VALUES (
       		#{mov_idn},
       		#{number}
      	)
 	</insert>
  
	<delete id="deleteListLike">
     	DELETE FROM
     		movie_like
     	WHERE 
     		mov_idn = #{mov_idn} AND number = #{number}
 	</delete>
  
	<update id="updateListLike">
     	UPDATE 
     		movie_mst
      	SET
            mov_lik_cnt = (SELECT COUNT(*)
            FROM movie_like
            WHERE mov_idn = #{mov_idn})
            WHERE mov_idn = #{mov_idn}
	</update>
	
	<select id="getListLike" resultType="int">
            SELECT COUNT(
            	mov_lik_idn
            ) FROM
            	movie_lik
            WHERE
            	mov_idn = #{mov_idn} AND number = #{number}
  	</select>
  
  </mapper>